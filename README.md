# API онлайн-кинотеатра

Приложение представляет собой API для возможности просматривать информацию по кинопроизведениям,
жанрам и персонам. Для персон и кинопроизведений настроен полнотекстовый поиск.

В рамках этого репозитория также доступен ETL-процесс, который синхронизирует изменения
в админке онлайн-кинотеатра с сервером ElasticSearch.

## Технологии
1. Python==3.13
2. fastapi==0.111.0
3. elasticsearch[async]==8.13.2
4. redis==5.0.4
5. gunicorn==23.0.0
6. Остальные зависимости представлены в файле `requirements.txt`

## Запуск проекта локально

Подразумевается, что данный проект должен работать в связке с `new_admin_panel_sprint_2`,
где располагается админка онлайн-кинотеатра. Для корректной работы API рекомендуется сначала поднять админку,
так как в ней поднимается сеть Docker, а также контейнер с psql, необходимые для работы ETL процесса.

При необходимости отладки, данный проект также может быть поднят независимо от админки, но для этого нужно будет раскомментировать
необходимые секции в compose-файле.

Для запуска проекте в связке с админкой следуйте следующим инструкциям:

1. Заполнить файл `/postgres_to_es/.env` и `/src/.env` по примеру из `.env.template`.
2. Поднять сервис с админкой `new_admin_panel_sprint_2`.
3. Поднять все сервисы через `docker-compose.yml`:
    - Создать сеть при необходимости:
    ```
    docker network create app_movies_net
    ```
    - Поднять сервисы:
    ```
    docker compose up -d
    ```
4. После запуска с портами по умолчанию API онлайн-кинотеатра будет доступен по адресу: http://localhost/api/openapi